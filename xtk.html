<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XTK Assigment</title>
    <style>
        html, body{
            background-color: #000;
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden !important;
        }
        #r1{
            width: 50%;
            height: 100%;
            float: left;
        }
        #r2{
            width: 50%;
            height: 100%;
            float: right;
        }
    </style>
    <script type="xtk_edge.js"></script>
    <script type="text/javascript"  src="http://get.goXTK.com/xtk_edge.js" ></script>
    <script type="text/javascript" src="https://get.goXTK.com/xtk_xdat.gui.js"></script>
    <script src="https://threejs.org/build/three.min.js" type="text/javascript"></script>
    <script src="https://threejs.org/examples/js/controls/TrackballControls.js" type="text/javascript"></script>

    <script type="text/javascript">
        window.onload = function(){
            r = new X.renderer3D();
             r.container =document.getElementById('r1'); 
            r.init();
            c = new X.cube();
            c.center =[1, 1, 0];
            c.color = [1, 0, 0];
            r.add(c);
            console.log(c.opacity);
            var controller = {
                'threejs_color': 0xffffff , 
                'rotateX':function(){
                    c.transform.rotateX(20);
                    cube.rotateX(20);
                }, 
                rotateY: function(){
                    c.transform.rotateY(20);
                    cube.rotateY(20);
                },
                rotateZ: function(){
                    c.transform.rotateZ(20);
                    cube.rotateZ(20);
                },
                'add new': function() {
            
            r3 = new X.renderer3D();
              r3.container =document.getElementById('r1'); 
             r3.init();
             c3 = new X.cube();
             c3.center =[0, 0, 0];
             c3.color = [0, 1, 0];
            c3.position=[20,20,20];
             r3.add(c3);
             r3.render();



           scene4 = new THREE.Scene();
      var fov = 25;
     var zNear = 1;
     var zFar = 1000;

       var r4 = document.getElementById('r2');
      var ratio = r4.clientHeight/r2.clientHeight;

      camera = new THREE.PerspectiveCamera(fov, ratio, zNear, zFar);
       camera.position.set(0, 0, 100);
 
       renderer4 = new THREE.WebGLRenderer({antialias:true});
       renderer4.setSize( r4.clientWidth, r4.clientHeight );

       r4.appendChild( renderer4.domElement );
      ambientLight = new THREE.AmbientLight();
         scene4.add( ambientLight );

          light = new THREE.DirectionalLight( 0xffffff, 5.0 );
         light.position.set( 50, 50, 50 );
          scene4.add( light );


           geometry4 = new THREE.BoxGeometry( 20, 10, 20 );
           material4 = new THREE.MeshStandardMaterial({ color: 0xffffff });
           cube4 = new THREE.Mesh( geometry4, material4 );
           cube4.position.set(20,20,20);
          scene4.add(cube);
           renderer4.render( scene4, camera );

          //animate();



                }
        };
            var gui = new dat.GUI();
            var cubeGui = gui.addFolder('Cube');
            cubeGui.addColor(c, 'color');
            cubeGui.add(c, 'opacity');
            cubeGui.add(c, 'visible');
            cubeGui.add(c, 'lengthX', 0, 100).onChange(function(){
                c.modified();
                
            });
 
      // render everything!
      //r.render();


      // Second cubes starts from here  
      scene = new THREE.Scene();
      var fov = 25;
     var zNear = 1;
     var zFar = 1000;

      var r2 = document.getElementById('r2');
      var ratio = r2.clientHeight/r2.clientHeight;

      camera = new THREE.PerspectiveCamera(fov, ratio, zNear, zFar);
      camera.position.set(0, 0, 100);
 
      renderer = new THREE.WebGLRenderer({antialias:true});
      renderer.setSize( r2.clientWidth, r2.clientHeight );

      r2.appendChild( renderer.domElement );
      ambientLight = new THREE.AmbientLight();
        scene.add( ambientLight );

         light = new THREE.DirectionalLight( 0xffffff, 5.0 );
        light.position.set( 10, 100, 10 );
         scene.add( light );


          geometry = new THREE.BoxGeometry( 20, 10, 20 );
          material = new THREE.MeshStandardMaterial({ color: 0xffffff });
          cube = new THREE.Mesh( geometry, material );
          scene.add(cube);
          
          var threejsUI= gui.addFolder('Three.js Cube');
          threejsUI .add(cube, 'visible');
          threejsUI.add(cube.material, 'opacity', 0, 1).onChange(function(){
            cube.material.transparent = true;
          });
          threejsUI.addColor(controller, 'threejs_color').onChange(function(){
            cube.material.color.set(controller.threejs_color);
          });
          threejsUI.open();

          var both = gui.addFolder('Both Cubes');
          both.add(controller, 'rotateX');
          both.add(controller, 'rotateY');
          both.add(controller, 'rotateZ');
          both.add(controller, 'add new');
          both.open();


          //controls = new THREE.TrackballControls( camera, r2 );
    
      animate();

        }; 

        function animate(){

            requestAnimationFrame(animate);
           // controls.update();
           r.render();
            renderer.render( scene, camera );
        };

    </script>
</head>
<body>
    <div id="r1"> </div>
    <div id="r2"> </div>
</body>
</html>